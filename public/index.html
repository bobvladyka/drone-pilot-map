<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Dronov√° mapa pilot≈Ø v ƒåesku ‚Äì Najdi nebo se p≈ôidej</title>

    <meta name="description" content="Hled√°≈° pilota dronu nebo chce≈° b√Ωt vidƒõt? Dronov√° mapa spojuje piloty a z√°kazn√≠ky. Rychl√© spojen√≠, ovƒõ≈ôen√≠ u≈æivatel√© a mo≈ænost p≈ôiv√Ωdƒõlku." />
  <meta name="robots" content="index, follow" />
<link rel="canonical" href="https://www.najdipilota.cz/" />

  <!-- Open Graph pro Facebook a dal≈°√≠ s√≠tƒõ -->
  <meta property="og:title" content="Dronov√° mapa pilot≈Ø v ƒåesku" />
  <meta property="og:description" content="Spojujeme z√°kazn√≠ky s piloty dron≈Ø. Zobraz se na mapƒõ nebo si najdi pilota ve sv√©m okol√≠." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.najdipilota.cz/" />
  <meta property="og:image" content="https://www.najdipilota.cz/og-image.jpg" />
  <!-- Nahraƒè re√°lnou URL obr√°zku -->
  <meta name="google-site-verification" content="yxzi02d6ahPBVtx31lx_Mwg07khOFlY_fWUFdkyrsUE" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Vlastn√≠ styl -->
  <link rel="stylesheet" href="style.css" />

  <!-- Leaflet a MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<!-- Favicony -->
<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
<link rel="manifest" href="/icons/site.webmanifest">
<link rel="icon" href="/icons/favicon.ico" type="image/x-icon">



</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
  <div class="container">
    <a class="navbar-brand fw-bold d-flex align-items-center" href="/index.html">
  <img src="/icons/logo.png" alt="" height="60" class="me-2" loading="lazy" aria-hidden="true" />
  <span class="fs-4">NajdiPilota.cz</span>
</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="mainNavbar">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
	<li class="nav-item" id="inzerent-nav-item" style="display:none;">
  <a class="nav-link text-warning fw-bold" href="#" data-bs-toggle="modal" data-bs-target="#inzerentModal">
    <i class="bi bi-megaphone-fill me-1"></i>Pro inzerenty
  </a>
</li>
        <li class="nav-item">
          <a class="nav-link" href="/index.html">Mapa</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/o-projektu.html">O projektu</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/kontakt.html">Kontakt</a>
        </li>
<li class="nav-item">

</li>
      </ul>
<button id="login-button" class="pilot-login-btn btn-sm user-action d-flex align-items-center justify-content-center px-3 py-2">
  <i class="bi bi-person-badge me-2"></i>
  <span id="login-toggle">P≈ôihl√°sit se jako pilot</span>
</button>
    </div>
  </div>
</nav>

  <div class="container py-4">
    <h1 class="text-center">
  <i class="bi bi-map-fill me-2" aria-hidden="true"></i>
  Mapa pilot≈Ø dron≈Ø v ƒåesku
</h1>
    <p id="user-status" class="text-center fw-bold mb-3"></p>
<!-- Tlaƒç√≠tka p≈ôihl√°≈°en√≠ -->
<div id="pilot-login-wrapper" class="d-flex flex-wrap align-items-center gap-2 justify-content-center" >

  


<!-- Modal pro inzerenty -->
<div class="modal fade" id="inzerentModal" tabindex="-1" aria-labelledby="inzerentModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-warning">
      <div class="modal-header bg-warning">
        <h5 class="modal-title" id="inzerentModalLabel">
          <i class="bi bi-building me-2"></i>Pro firmy a inzerenty
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Zav≈ô√≠t"></button>
      </div>
      <div class="modal-body">
        <p>Hled√°te pilota pro nat√°ƒçen√≠, inspekci nebo mapov√°n√≠? Vyberte si z ovƒõ≈ôen√Ωch pilot≈Ø podle regionu a specializace.</p>
      </div>
      <div class="modal-footer">
        <a href="/inzerent.html" class="btn btn-outline-warning">
          <i class="bi bi-person-badge-fill me-1"></i> P≈ôihl√°sit se jako inzerent
        </a>
      </div>
    </div>
  </div>
</div>


  <span id="logged-info" class="fw-bold small"></span>
  <button id="edit-profile-btn" style="display:none;" class="btn btn-outline-secondary btn-sm user-action">
    <i class="bi bi-pencil-square me-1"></i>Upravit
  </button>
</div>
    

    <section class="mb-5">
<p class="visually-hidden">
  Najdi ovƒõ≈ôen√© piloty dron≈Ø v ƒåesku. Interaktivn√≠ mapa pilot≈Ø dron≈Ø ‚Äì podle lokality, vybaven√≠ a specializace. Rychl√Ω kontakt a p≈ô√≠m√© propojen√≠ se z√°kazn√≠ky.
</p>
      <p><strong>Hled√°≈° pilota dronu ve sv√©m okol√≠?</strong> Nebo s√°m l√©t√°≈° a chce≈° b√Ωt vidƒõt?</p>
      <p>Tato mapa spojuje z√°kazn√≠ky a piloty. Najdi si spolehliv√©ho pilota podle m√≠sta, vybaven√≠ nebo specializace ‚Äì nebo se s√°m zaregistruj a z√≠skej nov√© p≈ô√≠le≈æitosti k l√©t√°n√≠ i v√Ωdƒõlku.</p>
      <ul>
  <li><strong>Rychl√© spojen√≠</strong> bez zbyteƒçn√Ωch formul√°≈ô≈Ø</li>
  <li><strong>Ovƒõ≈ôen√≠ piloti</strong> s profilem a kontaktem</li>
  <li><strong>Mo≈ænost p≈ôiv√Ωdƒõlku</strong> pro ka≈æd√©ho pilota</li>
</ul>
      <p><strong>Zaƒçni kliknut√≠m na pilota na mapƒõ nebo se rovnou p≈ôihlas a p≈ôidej se!</strong></p>
    </section>

    <h2>
  <i class="bi bi-geo-alt-fill text-danger me-2" aria-hidden="true"></i>
  Seznam pilot≈Ø na mapƒõ
</h2>

    <p>Na mapƒõ n√≠≈æe vid√≠≈° v≈°echny dostupn√© piloty. Klikni na ikonu a zobraz si jejich profil, vybaven√≠ a kontakt. P≈ôihl√°≈°en√≠ u≈æivatel√© uvid√≠ i dal≈°√≠ detaily jako specializaci, drony nebo rozsah doj√≠≈ædƒõn√≠.</p>

    <div id="login-modal-backdrop"></div>

    <!-- P≈ôihla≈°ovac√≠ modal -->
    <div id="login-box" style="display: "display: none; position: relative;">
<button type="button" class="btn-close close-btn" aria-label="Zav≈ô√≠t"
        onclick="document.getElementById('login-box').style.display='none';"></button>
   <h3>P≈ôihl√°≈°en√≠ pilota</h3>


      <form id="login-form" onsubmit="pilotLogin(event)">
        <div class="mb-3">
          <label for="email" class="form-label">E-mail:</label>
          <input type="email" id="email" name="email" class="form-control" required />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Heslo:</label>
          <input type="password" id="password" name="password" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary w-100">üîê P≈ôihl√°sit se</button>
      </form>
      <p id="login-status" class="mt-3"></p>
      <a href="/register.html" class="link">Nejsem je≈°tƒõ registrov√°n ‚Äì chci se zaregistrovat</a>
      <a href="/forgot.html" class="link">Zapomenut√© heslo?</a>
    </div>

    <div id="map" class="mt-4"></div>
  </div>

  <!-- Leaflet & Cluster -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Skript -->
  <script>
    const map = L.map('map').setView([49.8, 15.5], 7);
const fakeNames = [
  "Rychl√Ω Sysel",
  "L√©taj√≠c√≠ Brambor",
  "Dronislav Nebe≈°≈•√°k",
  "Turbo R√°kosn√≠k",
  "Bezpilotn√≠ Emil",
  "P√≠skaj√≠c√≠ P√°v",
  "Pilotka Haluz",
  "Franti≈°ek Vrtuln√≠k",
  "Lev√Ω Joystick",
  "Kapit√°n St√≠n",
  "Dr. Rotor",
  "Pan Toƒçiv√Ω",
  "Letu≈°ka Landov√°",
  "St≈ôemhlav√Ω Franta",
  "Nadzvukov√Ω Je≈æek",
  "L√©taj√≠c√≠ ƒåenda",
  "Rotorov√° R√≥za",
  "≈†um√≠c√≠ Fanda",
  "Bezpeƒçn√Ω B√©ƒèa",
  "Maj√°k z Oblak",
  "Dron√Ω Karel",
  "Letec ≈†matla",
  "Start√©r Stan√≠k",
  "P≈ôist√°vac√≠ Pepa",
  "Helikopt√©rn√≠k Honza",
  "Navig√°tor Nov√°k",
  "Senzorov√° So≈àa",
  "P√°n Mrak≈Ø",
  "Let√≠c√≠ Lojza",
  "Kamera Kamil",
  "Rotor R√≠≈°a",
  "V√Ω≈°komƒõr Va≈°ek",
  "Vzdu≈°n√Ω Vojta",
  "Tich√Ω ≈†um√°k",
  "Drnƒçiv√Ω Dan",
  "Mlha Milda",
  "Optika Otakar",
  "Ztracen√Ω Sign√°l",
  "Mistr Gimbal",
  "Ant√©na Aniƒçka",
  "Vrtulka Vƒõrka",
  "Letmo L√≠da",
  "Flyboy Felix",
  "Vzdu≈°n√° V√≠la",
  "Navigaƒçn√≠ Norbert",
  "Modr√° Letka",
  "K≈ô√≠dlat√Ω Karel",
  "Poln√≠ P≈ô√≠zrak",
  "Mapov√Ω Mirek",
  "Kliƒçkuj√≠c√≠ Kuba"
];

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap',
      maxZoom: 18
    }).addTo(map);

    const markers = L.markerClusterGroup();
    const pilotCircles = [];
    fetch('/pilots')
      .then(res => res.json())
      .then(data => {
        data.forEach(p => {
          if (p.latitude != null && p.longitude != null) {
            const circle = L.circle([p.latitude, p.longitude], {
              radius: 2000,
              color: 'green',
              fillColor: '#4CAF50',
              fillOpacity: 0.4,
              weight: 1
            })
            .bindPopup(() => {
  const loggedIn = localStorage.getItem("loggedEmail") || localStorage.getItem("inzerentEmail");


  let html = `<div class="pilot-card${p.volunteer === 'ANO' ? ' volunteer-border' : ''}">`;

  if (loggedIn) {
    html += `
      <h3><i class="bi bi-person-circle me-1"></i>${p.name}</h3>
      <p><i class="bi bi-envelope-at me-1"></i><a href="mailto:${p.email}">${p.email}</a></p>
      ${p.phone ? `<p><i class="bi bi-telephone-fill me-1"></i><a href="tel:${p.phone}">${p.phone}</a></p>` : ''}
      ${p.drones ? `<p><i class="bi bi-drone me-1"></i><strong>Drony:</strong> ${p.drones}</p>` : ''}
      ${p.note ? `<p><i class="bi bi-chat-left-text me-1"></i><strong>O mnƒõ:</strong> ${p.note}</p>` : ''}
      ${p.travel ? `<p><i class="bi bi-signpost me-1"></i><strong>Doj√≠≈ædƒõn√≠:</strong> ${p.travel}</p>` : ''}
      ${p.licenses ? `<p><i class="bi bi-award me-1"></i><strong>Licence:</strong> ${p.licenses}</p>` : ''}
      ${p.specialization ? `<p><i class="bi bi-puzzle-fill me-1"></i><strong>Specializace:</strong> ${p.specialization}</p>` : ''}
    `;
  } else {
    // Vyber n√°hodn√© jm√©no
    const fakeName = fakeNames[Math.floor(Math.random() * fakeNames.length)];

    html += `
      <h3><i class="bi bi-person-circle me-1"></i>${fakeName}</h3>
      <p><i class="bi bi-envelope-at me-1"></i><span class="text-muted">[e-mail po p≈ôihl√°≈°en√≠]</span></p>
      ${p.phone ? `<p><i class="bi bi-telephone-fill me-1"></i><span class="text-muted">[telefon skryt]</span></p>` : ''}
      ${p.specialization ? `<p><i class="bi bi-puzzle-fill me-1"></i><strong>Specializace:</strong> ${p.specialization}</p>` : ''}
      <p class="text-muted"><em>P≈ôihlas se pro v√≠ce informac√≠ o pilotovi.</em></p>
    `;
  }

  html += `</div>`;
  return html;
});

            markers.addLayer(circle);
            pilotCircles.push(circle);
          }
        });
        map.addLayer(markers);
        if (markers.getBounds().isValid()) {
          map.fitBounds(markers.getBounds(), { padding: [30, 30] });
        }
      });

    map.on('zoomend', () => {
      const zoom = map.getZoom();
      pilotCircles.forEach(circle => {
        const maxZoom = 14;
        const minZoom = 7;
        const minRadius = 100;
        const maxRadius = 2000;
        const ratio = (zoom - minZoom) / (maxZoom - minZoom);
        const radius = Math.max(minRadius, maxRadius - (maxRadius - minRadius) * ratio);
        circle.setRadius(radius);
        const opacity = 0.2 + 0.2 * (1 - ratio);
        circle.setStyle({ fillOpacity: opacity });
      });
    });

    document.addEventListener("DOMContentLoaded", () => {
      const loginBox = document.getElementById("login-box");
      const toggle = document.getElementById("login-toggle");
      const status = document.getElementById("user-status");
      const loggedEmail = localStorage.getItem("loggedEmail");
      const editBtn = document.getElementById("edit-profile-btn");

const inzerentNavItem = document.getElementById("inzerent-nav-item");
  if (!loggedEmail && inzerentNavItem) {
    inzerentNavItem.style.display = "block";
  }

      if (loggedEmail) {
        loginBox.style.display = "none";
        editBtn.style.display = "inline-block";
        toggle.textContent = "Odhl√°sit";
        status.textContent = "P≈ôihl√°≈°en jako: " + loggedEmail;
        toggle.addEventListener("click", () => {
          localStorage.removeItem("loggedEmail");
          window.location.reload();
        });
      } else {
        toggle.addEventListener("click", () => {
          loginBox.style.display = loginBox.style.display === "none" ? "block" : "none";
        });
      }

      if (loggedEmail && editBtn) {
        editBtn.style.display = "inline-block";
        editBtn.addEventListener("click", () => {
          window.location.href = "/account.html?email=" + encodeURIComponent(loggedEmail);
        });
      }

      window.pilotLogin = function(event) {
        event.preventDefault();
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const statusBox = document.getElementById("login-status");

        fetch("/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        })
        .then(res => {
          if (!res.ok) throw new Error("Neplatn√Ω e-mail nebo heslo.");
          return res.text();
        })
        .then(msg => {
          localStorage.setItem("loggedEmail", email);
          statusBox.style.color = "green";
          statusBox.textContent = msg;
          window.location.href = "/account.html?email=" + encodeURIComponent(email);
        })
        .catch(err => {
          statusBox.style.color = "red";
          statusBox.textContent = err.message;
        });
      };
    });
  </script>
<script>
  const advertiserEmail = localStorage.getItem("inzerentEmail");

  if (advertiserEmail) {
    const banner = document.createElement("div");
    banner.className = "alert alert-warning text-center m-3 d-flex justify-content-center align-items-center";
    banner.innerHTML = `
      <div>
        <strong>P≈ôihl√°≈°en inzerent:</strong> ${advertiserEmail}
      </div>
    `;

    const logoutBtn = document.createElement("button");
    logoutBtn.className = "btn btn-sm btn-outline-dark ms-3";
    logoutBtn.textContent = "Odhl√°sit se";
    logoutBtn.onclick = () => {
      localStorage.removeItem("inzerentEmail");
      window.location.reload();
    };

    banner.appendChild(logoutBtn);
    document.body.prepend(banner);
  }
</script>



<script>
  document.addEventListener("DOMContentLoaded", () => {
    const inzerentEmail = localStorage.getItem("inzerentEmail");
    const loginWrapper = document.getElementById("pilot-login-wrapper");

    if (inzerentEmail && loginWrapper) {
      loginWrapper.style.display = "none";
    }
  });
</script>


</body>
</html>
